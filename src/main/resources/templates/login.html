<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="form-card">
    <h2>Login</h2>

    <!-- Error message block -->
    <div th:if="${param.error}" class="error-box" style="color: red; font-weight: bold; margin-bottom: 10px;">
        Invalid username or password.
    </div>

    <form th:action="@{/login}" method="post">
        <div class="input-group">
            <i class="fas fa-user-circle"></i>
            <input type="text" name="username" placeholder="Username" required>
        </div>

        <div class="input-group password-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="loginPassword" name="password" placeholder="Password" required>
            <span class="eye-toggle" onclick="togglePassword('loginPassword', this)">
                <i class="fas fa-eye"></i>
            </span>
        </div>

        <button type="submit">Login</button>
    </form>

    <p>Don't have an account? <a th:href="@{/register}">Register here</a></p>
</div>

<script>
    function togglePassword(id, el) {
        const field = document.getElementById(id);
        const icon = el.querySelector('i');
        if (field) {
            const show = field.type === 'password';
            field.type = show ? 'text' : 'password';
            icon.classList.toggle('fa-eye');
            icon.classList.toggle('fa-eye-slash');
        }
    }
</script>

</body>
</html>
